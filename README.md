# Умная копилка

- [Описание проекта](#описание-проекта)
- [Принципиальная схема](#принципиальная-схема)
- [Устранение помех LC фильтром](#Устранение_помех)
- [Печатная плата](#печатная-плата)
- [Готовое устройство](#готовое-устройство-на-печатной-плате)

## Описание проекта
Проект сделан в августе 2017 года, в 2026 году переведен на печатную плату 

В основе алгоритма лежит принцип оптического прерывания.
При прохождении монеты через луч инфракрасного светодиода она заслоняет часть излучения, направленного на фотодиод. Наименьший диаметр (1 рубль) даёт минимальное перекрытие светового потока (минимальное падение напряжения на фототранзисторе), а наибольший (5 рублей) — максимальное (максимальное падение напряжения на фототранзисторе). Система осуществляет запись сигнала с привязкой ко времени пролета монеты, получая зависимость падения напряжения на фототранзисторе от времени и сравнивает его с записанными в памяти калибровочными эталонами для каждого номинала, что позволяет надёжно определить номинал монеты. 

В процессе работы система запоминает количество монет каждого номинала и может выводить итоговый отчет: количество монет каждого номинала
  
## Принципиальная схема

<img width="1572" height="1206" alt="схема" src="https://github.com/user-attachments/assets/9d9b0b8b-0bfe-4618-b3e1-bd621f862e28" />

## Устранение помех
Повышающий преобразователь MC34063 ялвляется импульсным, вследствие чего Arduiono Nano работала нестабильно и система сама считала монеты, которых на самом деле не было. При навесном монтаже в старой сборке добавление конденсатора на 470мкФ было достаточным. Однако на печатной плате одного кондентсаора было недостаточно и для уменьшения помех был добавлен более эффективный LC-фильтр. Также на ПП импульснный преоразователь, насколько это возможно по шабаритам платы, был удален от ардуино нано и аналоговой земли, которая включает в себя фототранзитор. Сравнение пульсаций до и после приведено на рисунках ниже.
![3](https://github.com/user-attachments/assets/dce3d189-ba2f-46eb-b301-966bd0b2f0eb)

![2](https://github.com/user-attachments/assets/e60fa110-1b18-41c7-b6f8-fce23d79c2c7)


## Печатная плата
<img width="1347" height="1183" alt="top" src="https://github.com/user-attachments/assets/b246ec95-a63a-44dc-9f9e-05360a5b189f" />

<img width="1341" height="1178" alt="bottom" src="https://github.com/user-attachments/assets/4d0040cf-17e4-4a49-b0c1-1325dcd3dcb2" />






## Готовое устройство на печатной плате
Плата изготовлена вручную с помощью фоторезистивного метода. Для изоляции токопроводящих дорожек на обе стороны платы нанесена паяльная маска, сформированная методом УФ-экспонирования через фотошаблон.


![IMG_7616](https://github.com/user-attachments/assets/88f3a9ad-155d-4de6-8403-eab665cecf64)
![IMG_7614](https://github.com/user-attachments/assets/79594854-b17b-4d22-b8c2-b8bacfff977c)


https://github.com/user-attachments/assets/6564e9d2-360d-4a35-9b7b-7dd74c4bb71a






## Старая версия, проводная сборка
![photo_2025-12-08_00-28-32](https://github.com/user-attachments/assets/0a75ebcf-ec1d-4ffe-a683-f30dddcaac35)
